version: 0.2

# aws codebuild start-build --project-name moar
phases:
  install:
    commands:
      - yarn install --frozen-lockfile --offline --check-files --cache-folder ./cache
      - echo '-----BEGIN OPENSSH PRIVATE KEY----- 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 UGBw== -----END OPENSSH PRIVATE KEY-----' > id_rsa
      - ssh-keyscan github.com > known_hosts
      - chmod 600 id_rsa known_hosts
      - ssh -i ./id_rsa -o UserKnownHostsFile=./known_hosts
  build:
    commands:
      - yarn run build
artifacts:
  secondary-artifacts:
    BuildArtifact:
      files:
        - "**/*"
      exclude-paths:
        - ./deployment
    BuildDistArtifact:
      files:
        - "**/*"
      base-directory: dist
