version: 0.2

# aws codebuild start-build --project-name moar
phases:
  pre_build:
    commands:
      - cd ${TF_DIR}
  build:
    commands:
      - yes | terragrunt init -upgrade
      - terragrunt hclfmt
      - terragrunt validate-inputs
      - terragrunt validate -json
      - yarn && yarn prettier --check .
      - exit $?
